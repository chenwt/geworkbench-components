<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>

  
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>Tutorial - ARACNE - Workbench</title>
    <style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/workbench/skins/monobook/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" href="aracne_files/commonPrint.css">

<a name="Overview"></a><h1>Overview</h1>
<p>ARACNe (Algorithm for the Reconstruction of Accurate Cellular Networks) (Basso et al. 2005; Margolin, Nemenman et al. 2006) is an information-theoretic algorithm used to identify transcriptional interactions between gene products using microarray expression profile data. The resulting network is displayed using the Cytoscape component. ARACNe can be used to predict potential functional associations among genes, or to predict novel functions for uncharacterized genes, by identifying statistical dependencies between genes. The results take the form of a matrix of candidate interactions, also called an adjacency matrix, which can be used for further network visualization and analysis. ARACNe has been used to reconstruct networks in mammalian cells through appropriate choice of dataset. 
</p>

<p>ARACNe performs best with a dataset containing data from a minimum of 100 microarrays (see Margolin, Wang et al. 2006) and representing a number of different states of the same cellular system - for example, cells lines of varying phenotype, or cells subjected to a variety of experimental perturbations. Initial work with ARACNe was performed using a large collection (about 340) of B-cell lines of various phenotypes (Basso et al. 2005). For the "Adaptive Partitioning" option, there is no upper limit on the number of arrays that can be included. For the "Fixed Bandwidth" option, arrays in excess of 300 can lead to long computation times. A subset of the B-Cell dataset, derived from 100 arrays, is included with geWorkbench (Bcell-100.exp). 
</p><p>ARACNe can perform two separate calculations:
</p>
<ol><li> <b>Mutual Information</b>: The mutual information (MI) of one or more marker's expression profile(s) is calculated against all other active markers.
</li><li> <b>Data Processing Inequality (DPI)</b>: The DPI calculation
(triangle inequality) is used to remove the weakest interaction (edge)
between any three markers. That is, if a MI value is available between
each of three possible pairings of three markers, the weakest
interaction of the three will be removed from the output. This has the
intent of removing indirect interactions. For example, if
A-&gt;B-&gt;C, the interaction A-&gt;C will likely be weaker than
A-&gt;B or B-&gt;C and would be removed. A tolerance can be set which
relaxes this screening to account for uncertainty in the MI
calculation.
</li></ol>
<p>Parameters described below allow one to incorporate a list of
putative transcription factors and optimize the run to discover targets
that they may regulate.
</p><p>Current versions of geWorkbench (starting with release 1.7.0) use a new implementation of ARACNe, ARACNe2, that supports two important new features:  
</p>
<ol><li> <b>Algorithm</b> - A new algorithm, termed "Adaptive Partioning", which is both much faster and more sensitive, is supported.
</li><li> <b>Mode</b> - The user can choose to custom-calculate optimal run parameters for a given dataset. 
</li></ol>
<p>Further information on ARACNe is available in the References section below.
</p>
<a name="Setting_up_an_ARACNe_run"></a><h1>Setting up an ARACNe run</h1>
<a name="Prerequisites"></a><h2>Prerequisites</h2>
<ul><li> To use the ARACNe routine, first check that it has been loaded in the <a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Tutorial_-_Component_Configuration_Manager" title="Tutorial - Component Configuration Manager"> Component Configuration Manager</a>.
</li><li> ARACNe is found in the list of available analysis routines in the lower-right <b>Commands</b> quadrant of geWorkbench.
</li><li> A microarray dataset of sufficient size and phenotypic diversity is needed (See the Overview, above).
</li><li> Load the microarray dataset into the Project Folders
component. If available, associate a gene annotation file with the
dataset. This will allow the results to be displayed in consolidated
fashion in Cytoscape by gene rather than by marker (individual
probeset) name.
</li></ul>
<a name="Parameters_and_Settings"></a><h2>Parameters and Settings</h2>
<p><a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Image:T_ARACNE_parameters2.png" class="image" title="Image:T_ARACNE_parameters2.png"><img src="aracne_files/T_ARACNE_parameters2.png" alt="Image:T_ARACNE_parameters2.png" longdesc="/workbench/index.php/Image:T_ARACNE_parameters2.png" width="904" height="420"></a>
</p>
<a name="Algorithm"></a><h3> Algorithm</h3>
<p>Two algorithms are offered with which to calculate the pairwise mutual information between markers:
</p>
<ul><li> <b>Adaptive Partitioning</b> (default) - should generally be used for all new calculations.   
</li><li> <b>Fixed Bandwidth</b> - previous, slower algorithm using a fixed Gaussian kernel.  
</li></ul>
<a name="Adaptive_Partitioning"></a><h4>Adaptive Partitioning</h4>
<p>Adaptive Partitioning was added with the incorporation of the
ARACNe2 code into geWorkbench ( as of version 1.7.0). Adaptive
Partitioning is much faster than the original Fixed Bandwidth method,
and is also considered to produce superior results. Adaptive
Partitioning is now the recommended algorithm for all purposes. Unlike
the Fixed Bandwidth method, it does not used a fixed kernel-width when
calculating the MI.
</p>
<a name="Fixed_Bandwidth"></a><h4>Fixed Bandwidth</h4>
<p>Fixed Bandwidth was the original algorithm used in ARACNe and is
included for compatibility with previous releases. This method uses a
kernel-width parameter for a Gaussian function used to calculate the
MI.
</p>
<a name="Mode"></a><h3>Mode</h3>
<p>Used to control the calculation and use of runtime parameters from the input dataset. 
</p>
<ul><li> <b>PREPROCESSING</b> - calculates the required parameters and writes them to parameter files.
</li><li> <b>DISCOVERY</b> - The ARACNe mutual information calculation is run.  Uses pre-calculated parameter files as needed if they are present.
</li><li> <b>COMPLETE</b> - Preprocessing and Discovery runs are combined into a single step.
</li></ul>
<a name="PREPROCESSING"></a><h4>PREPROCESSING</h4> 
<p>In this mode, runtime parameters are calculated, but no MI
calculation is performed. Preprocessing for a given combination of
dataset and algorithm need be run only once. The results are written to
one or two files in the geWorkbench root directory. The names used for
these files incorporate both the name of the dataset and the name of
the algorithm, and thus are specific to the particular combination.
Each time ARACNe is run in Discovery mode, it will look for the
dataset-specific parameter files in its root directory. If the files
are not found (Preprocessing has not been run), default parameter
values will be used.
</p>
<ul><li> Fixed Bandwidth (FBW) algorithm - two files are written to the
geWorkbench root directory, one containing parameters for calculating
the kernel width, and the other containing parameters for calculating a
MI threshold from a specified P-value.
</li><li> Adaptive Partitioning (AP) algorithm - only the parameter
file for calculating a MI threshold from a specified P-value is
written. No kernel-width parameter is used.
</li></ul>
<a name="Preprocessing_files_included_with_geWorkbench"></a><h4>Preprocessing files included with geWorkbench</h4>
<p>Preprocessing as described above was run on the Bcell-100.exp
dataset included with geWorkbench. The resulting ARACNe parameter files
are also included in the geWorkbench root directory. They will be used
by default when the Bcell-100.exp dataset is used in tutorials. Note
that if you rerun the preprocessing step, the relevant file(s) will be
overwritten.
</p><p>The parameter files included in geWorkbench are:
</p>
<ul><li> Bcell-100.exp_ARACNe_AP_threshold.txt - Adaptive Partitioning, Pvalue-to-MI threshold conversion parameters.
</li><li> Bcell-100.exp_ARACNe_FBW_kernel.txt   - Fixed Bandwidth, kernel width calculation parameters.
</li><li> Bcell-100.exp_ARACNe_FBW_threshold.txt - Fixed Bandwidth, Pvalue-to-MI threshold conversion parameters.
</li></ul>
<a name="DISCOVERY"></a><h4>DISCOVERY</h4>
<p>The ARACNe mutual information and the DPI (if selected) calculations
are run. If dataset-specific parameter files are present, they will be
used as needed (based on settings selected for Kernel Width and
Threshold).
</p>
<a name="COMPLETE"></a><h4>COMPLETE</h4>
<p>A preprocessing run will be performed followed immediately by a
Discovery run. The dataset-specific parameter files created during the
Preprocssing step will be used if needed (based on settings selected
for Kernel Width and Threshold).
</p>
<a name="When_is_preprocessing_not_needed.3F"></a><h4>When is preprocessing not needed?</h4>
<p>The preprocessing step can be time consuming. If you are for example
using Adaptive Partioning, and decide you do not need to specify a
p-value threshold for accepting edges, then you can just set a MI value
as the threshold and proceed directly to Discovery mode. This will
however make interpreting results more difficult.
</p><p>If ARACNe does not find the dataset-specific parameter files it
needs as described above, it will use by default parameters calculated
from the B-cell dataset (see Margolin et al., 2006).
</p>
<a name="Hub_Marker.28s.29"></a><h3>Hub Marker(s)</h3>
<p>Specifies which gene markers will be treated as "hubs" in the ARACNE
mutual information (MI) calculation. The mutual information is
calculated for each specified hub marker against all other markers in
the submitted dataset.  For many uses, it is suggested to use a defined list of known transcription factors as hub markers, rather than using the "All-vs-All" setting. 
</p>
<ul><li> <b>All vs All</b> - The MI of every pair of markers in the dataset is computed, that is, each is used as a hub.
</li><li> <b>From Sets</b> - allows a set of markers defined in the
Markers component to be chosen from a pulldown menu. Alternatively, the
user can type in the names of desired markers directly as a comma
separated list.
</li><li> <b>From File</b> - allows a comma-separated list of markers to be read in from a file by clicking <b>Load Markers</b>..
</li></ul>
<a name="Hub_marker.28s.29_must_appear_in_active_marker_set"></a><h4>Hub marker(s) must appear in active marker set</h4>
<p>If a set of markers is activated in the Markers component, rather
than using all markers, then the chosen hub marker(s)must also be
included in an active set. If the hub marker is missing from the active
sets, then an error dialog will be displayed. In the below picture, the
marker 1973_s_at was entered into the hub field without being part of a
subset of markers that had been activated:
</p><p><a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Image:T_ARACNe_hub_not_in_dataset.png" class="image" title="Image:T_ARACNe_hub_not_in_dataset.png"><img src="aracne_files/T_ARACNe_hub_not_in_dataset.png" alt="Image:T_ARACNe_hub_not_in_dataset.png" longdesc="/workbench/index.php/Image:T_ARACNe_hub_not_in_dataset.png" width="433" height="130"></a>
</p>
<a name="Threshold_Type"></a><h3>Threshold Type</h3>
<p>This drop-down specifies the type of threshold to be used and can
take the values “Mutual Info” or “P-value”. The actual value entered
into the adjacent text area is always a number between 0 and 1.
</p>
<a name="Kernel_width"></a><h3>Kernel width</h3>
<p>The Kernel width is a scaling parameter used for fitting a Gaussian
function to the data when running the FIXED_BANDWIDTH algorithm only,
otherwise this field is disabled. If used, the value can be either
inferred or specified directly.
</p>
<ul><li> <b>Inferred</b>: If PREPROCESSING has been run on the dataset
(mode is set to PREPROCESSING or COMPLETE), the kernel width is
calculated directly from those results. If PREPROCESSING has not been
run, the kernel width is inferred based on parameters fitted to a large
B-cell dataset (Margolin et al, 2006), extrapolated for the number of
samples in the dataset being tested.
</li><li> <b>Specify</b>: The user can enter a value for the kernel width directly, e.g. based on a prior calculation with this dataset.
</li></ul>
<a name="DPI_Tolerance"></a><h3>DPI Tolerance</h3>
<p>The Data Processing Inequality (triangle inequality)can be used to
remove the effects of indirect interactions, e.g. if
TF1-&gt;TF2-&gt;Target, DPI can be used to remove the indirect action
of TF1 on the target. Stated another way, the DPI can be used to remove
the weakest interaction of those between any three markers. The DPI
tolerance specifies the degree of sampling error to be accepted, as
with a finite sample size an exact value MI can not be calculated. The
higher the tolerance specified, the fewer the edges that will be
removed.
</p>
<ul><li> <b>Do Not Apply</b> - Do not use the DPI. 
</li><li> <b>Apply</b> - DPI is applied using the threshold value
(between 0.0 and 1.0) specified in the adjacent text field. The higher
the threshold, the weaker the screening and the more edges will be
included in the final output.
</li></ul>
<a name="DPI_Target_List"></a><h3>DPI Target List</h3>
<p>The DPI target list can be used to limit the ARACNE calculation to
transcriptional networks. It is used to screen out spurious regulatory
interaction signals of genes that are tightly co-expressed but are not
in a regulatory relationship to each other, for example genes for two
proteins that are in a physical complex and hence always produced in
the same amounts. A comma-separated list can be typed in, or it can be
loaded from an external file. If used, the DPI Target List should
contain all markers that are annotated as transcription factors.
Signaling proteins could also be included.
</p>
<ul><li> Details: If the box is checked, the user selects and loads a
file which specifies markers (which should be a list of one or more
presumptive transcription factors) which will be given preferential
treatment during the DPI edge-removal step. Edges originating from
markers on this list will not be removed by edges originating from
markers not on this list. However, for DPI calculations where all three
markers are members of the list, the weakest connecting edge may still
be removed.
</li></ul>
<p><br>
</p>
<a name="Bootstrapping"></a><h3>Bootstrapping</h3>
<p>Bootstrap analysis can be used to generate a more reliable estimate
of statistical significance for the interactions. Please see Margolin
et al. 2006, Nature Protocols, Vol 1, No. 2, pg. 663-672 for further
details (full reference below). Briefly, repeated runs of ARACNE are
made, with arrays drawn at random from the full dataset with
replacement. The same number of arrays is drawn each time as is present
in the original dataset. A permutation test is then used to obtain a
null distribution, against which the statistical significance of
support for each network edge connection (interaction) can be measured.
</p>
<ul><li> <b>Bootstrap number</b>: Specifies the number of bootstrapping runs to perform. 
</li><li> <b>Consensus threshold</b> (for bootstrapping only): After
the bootstrapping runs are made, a permutation test is used to estimate
the significance of interactions. The consensus threshold sets the
cutoff point for calling the interactions significant and returning
them in the final adjacency matrix
</li></ul>
<a name="Array_and_Marker_Set_Overrides"></a><h3>Array and Marker Set Overrides</h3>
<ul><li> <b>All Markers</b>: checking this box overrides any activated marker set in the Markers component.
</li><li> <b>All Arrays</b>: checking this box overrides any activated array set in the Arrays/Phenotypes component.
</li></ul>
<a name="Analysis_Actions"></a><h3>Analysis Actions</h3>
<ul><li> <b>Analyze</b> - start the ARACNe analysis
</li><li> <b>Save Settings, Delete Settings</b> - The geWorkbench
analysis framework provides a standard method for saving one or more
different sets of parameter settings per each type of analysis
component. Please see the <a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Tutorial_-_Analysis" title="Tutorial - Analysis"> Analysis Framework Tutorial</a> for further details.
</li></ul>
<a name="Services_.28Local_vs_Grid.29"></a><h1>Services (Local vs Grid)</h1>
<p>ARACNe can be run either locally within geWorkbench, or remotely as a grid job on caGrid.  See the <a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Tutorial_-_Grid_Services" title="Tutorial - Grid Services"> Grid Services</a> section for further details on setting up a grid job.
</p>
<a name="Special_Note_on_running_in_PREPROCESSING_mode_on_caGRID"></a><h2>Special Note on running in PREPROCESSING mode on caGRID</h2>
<p>When ARACNew is run in PREPROCESSING mode on a grid node, it writes
the parameter files to its execution directory on the grid node and
exits. No file is returned to geWorkbench. As currently implemented,
the ARACNe server detects the lack of a file to return (normally it
returns an adjacency matrix) and reports an error. This error can
simply be ignored. If ARACNe2 is run in COMPLETE or DISCOVERY mode this
error will not occur because both return adjacency matrices.
</p>
<a name="Viewing_ARACNe_results"></a><h1>Viewing ARACNe results</h1>
<ul><li> The result of an ARACNe run is an "adjacency matrix". it
contains the mutual information value for each pair of markers which
exceeded the specified MI threshold. The adjacency matrix is placed
into the Project Folders component as a child of the dataset that was
analyzed.
</li><li> The adjacency matrix can be visualized automatically in the <a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Tutorial_-_Cytoscape_Network_Viewer" title="Tutorial - Cytoscape Network Viewer"> Cytoscape</a> component, as shown below.
</li></ul>
<p><a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Image:T_ARACNE_result1.png" class="image" title="Image:T_ARACNE_result1.png"><img src="aracne_files/T_ARACNE_result1.png" alt="Image:T_ARACNE_result1.png" longdesc="/workbench/index.php/Image:T_ARACNE_result1.png" width="861" height="675"></a>
</p><p><br>
The integration between Cytoscape and geWorkbench allows for two-way interactions between them: 
</p>
<ol><li> Nodes selected in Cytoscape appear in the Marker Sets component in the set "Cytoscape selection".  
</li><li> Any set of markers in the Marker Sets component can be
projected onto the Cytoscape display, which will cause any matching
nodes there to be highlighted.
</li></ol>
<p>This interaction is demonstrated further on the <a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Tutorial_-_Cytoscape_Network_Viewer" title="Tutorial - Cytoscape Network Viewer"> Cytoscape tutorial page</a>.
</p><p>The Cytoscape Viewer maintains a list of networks which it has
currently loaded. It allows individual loaded networks to be deleted.
However, the network can be reloaded by clicking on its entry in the
Project Folders component. Cytoscape controls are more fully described
in the <a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Tutorial_-_Cytoscape_Network_Viewer" title="Tutorial - Cytoscape Network Viewer"> Cytoscape</a> component tutorial.
</p><p><br>
</p>
<a name="Dataset_History"></a><h1>Dataset History</h1>
<p>Details about each run are maintained in the Dataset History
component. With the ARACNe result node highlighted in the Project
Folders component, the Dataset History display includes the following
information:
</p>
<ul><li> Input file name
</li><li> Output file name
</li><li> Algorithm 
</li><li> Mode
</li><li> No. bins  
</li><li> MI threshold 
</li><li> MI threshold calculated from P-Value - If supplied, the p-value used to set the MI threshold.
</li><li> DPI tolerance 
</li><li> Hub markers 
</li><li> A listing of the microarrays used.
</li><li> A listing of the markers used.
</li></ul>
<p><br>
</p>
<a name="Example_of_running_ARACNe"></a><h1>Example of running ARACNe</h1>
<p>This example uses the Bcell-100.exp dataset available in the
data/public_data directory of geWorkbench, and further described on the
<a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Download" title="Download">Download</a>
page. Briefly, this dataset is composed of 100 Affymetrix HG-U95Av2
arrays on which various B-cell lines, both normal and cancerous, were
analyzed. Thus it explores a potentially wide variety of expression
phenotypes. </p>
<a name="Prerequisites_2"></a><h2>Prerequisites</h2>
<ol><li> (Optional) Obtain the annotation file for the HG-U95Av2 array type from the Affymetrix NetAffx website (<a href="http://www.affymetrix.com/analysis/index.affx" class="external free" title="http://www.affymetrix.com/analysis/index.affx" rel="nofollow">http://www.affymetrix.com/analysis/index.affx</a>).
The name will be similar to "HG_U95Av2.na29.annot.csv", where na29 is
the version number. Loading the annotation file associates gene names
and other information with the Affymetrix probeset IDs (see the <a href="http://wiki.c2b2.columbia.edu/workbench/index.php/FAQ" title="FAQ"> geWorkbench FAQ</a> for details on obtaining these files).
</li></ol>
<a name="Loading_the_example_data"></a><h2>Loading the example data</h2>
<ol><li> Load the Bcell-100.exp dataset into geWorkbench as type "Affymetrix File Matrix".  (See <a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Tutorial_-_Local_Data_Files" title="Tutorial - Local Data Files"> Local Data Files</a>).
</li><li> When prompted, and if desired, load the annotation file.
</li><li> In the Marker Sets component, load the file
"70_TFs_from_HG-U95Av2.na28.csv" (Load Set button). This file is
included in the geWorkbench tutorial data.
</li></ol>
<p><a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Image:T_ARACNE_load_markers.png" class="image" title="Image:T_ARACNE_load_markers.png"><img src="aracne_files/T_ARACNE_load_markers.png" alt="Image:T_ARACNE_load_markers.png" longdesc="/workbench/index.php/Image:T_ARACNE_load_markers.png" width="227" height="376"></a>
</p>
<a name="Setting_up_the_parameters_and_starting_ARACNe"></a><h2>Setting up the parameters and starting ARACNe</h2>
<p>1. In the geWorkbench commands area, select the "ARACNe" analysis. 
</p><p>2. Set up the ARACNe parameters as shown
</p>
<ul><li> <b>Hub Markers</b>: From Sets - Choose the set of 70 loaded above "70_TFs_from_HG-U95Av2.na28".
</li><li> <b>Threshold</b>: Mutual Info - Set value of 0.5.
</li><li> <b>Algorithm</b>: Adaptive Partitioning.
</li><li> <b>Mode</b>: Discovery
</li><li> <b>DPI Tolerance</b>: Do Not Apply
</li></ul>
<p><a href="http://wiki.c2b2.columbia.edu/workbench/index.php/Image:T_ARACNE_example1_params.png" class="image" title="Image:T_ARACNE_example1_params.png"><img src="aracne_files/T_ARACNE_example1_params.png" alt="Image:T_ARACNE_example1_params.png" longdesc="/workbench/index.php/Image:T_ARACNE_example1_params.png" width="627" height="381"></a>
</p><p>3. Press the "<b>Analyze</b>" button to launch the job.  On a current generation desktop machine expect this example to run for several minutes.
</p><p>4. The resulting network is the one depicted above in the "Viewing ARACNe results" section.
</p>
<a name="References"></a><h2>References</h2>
<ul><li> Basso K, Margolin AA, Stolovitzky G, Klein U, Dalla-Favera R,
Califano A: Reverse engineering of regulatory networks in human B
cells. Nat Genet 2005, 37(4):382-390 (<a href="http://www.nature.com/ng/journal/v37/n4/abs/ng1532.html" class="external text" title="http://www.nature.com/ng/journal/v37/n4/abs/ng1532.html" rel="nofollow">link to paper</a>).
</li></ul>
<ul><li> Margolin AA, Nemenman I, Basso K, Wiggins C, Stolovitzky G,
Dalla Favera R and Califano A, (2006) ARACNE: An Algorithm for the
Reconstruction of Gene Regulatory Networks in a Mammalian Cellular
Context, BMC Bioinformatics;7(Suppl.1):S7 (<a href="http://www.biomedcentral.com/1471-2105/7/S1/S7" class="external text" title="http://www.biomedcentral.com/1471-2105/7/S1/S7" rel="nofollow">link to paper</a>)
</li></ul>
<ul><li> Margolin, A., Wang, K., Lim, W.K., Kustagi, M., Nemenman, I.,
and Califano, A. Reverse Engineering Cellular Networks. Nature
Protocols (2006), Vol 1, No. 2, pgs. 663-672 (<a href="http://www.nature.com/nprot/journal/v1/n2/abs/nprot.2006.106.html" class="external text" title="http://www.nature.com/nprot/journal/v1/n2/abs/nprot.2006.106.html" rel="nofollow">link to paper</a>)
</li></ul>
</body></html>